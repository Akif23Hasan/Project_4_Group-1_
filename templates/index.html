<!DOCTYPE html>
<html>
<head>
    <title>Loan Eligibility Prediction</title>
</head>
<body>
    <h1>Loan Eligibility Prediction</h1>
    <form id="loanForm" action="/predict" method="post">
        <label for="gender">Gender (Male / Female):</label>
        <input type="checkbox" id="Gender" name="Gender" value="1">
        <label for="gender">Male</label>
        <input type="checkbox" id="Gender" name="Gender" value="0">
        <label for="gender">Female</label><br>

        <label for="married">Married (Yes / No):</label>
        <input type="checkbox" id="Married" name="Married" value="Yes">
        <label for="married">Yes</label>
        <input type="checkbox" id="Married" name="Married" value="No">
        <label for="married">No</label><br>
        <!-- Problem -->
        <label for="dependents">Dependants (total number of dependants):</label>
        <input type="text" id="Dependents" name="Dependents" required><br>
        
        <label for="Education">Education (Graduate / Not Graduate):</label>
        <input type="checkbox" id="Education" name="Education" value="Graduate">
        <label for="Education">Graduate</label>
        <input type="checkbox" id="Education" name="Education" value="Not Graduate">
        <label for="Education">Not Graduate</label><br>
        
        <label for="Self_Employed">Self Employed (Yes / No):</label>
        <input type="checkbox" id="Self_Employed" name="Self_Employed" value="Yes">
        <label for="Self_Employed">Yes</label>
        <input type="checkbox" id="Self_Employed" name="Self_Employed" value="No">
        <label for="Self_Employed">No</label><br>
        <!-- Problem -->
        <label for="ApplicantIncome">Applicant Income (per month):</label>
        <input type="number" id="ApplicantIncome" name="ApplicantIncome" required><br>
        <!-- Problem -->
        <label for="CoapplicantIncome">Co-applicant Income (per month):</label>
        <input type="number" id="CoapplicantIncome" name="CoapplicantIncome" required><br>
        <!-- Problem -->
        <label for="Loan Amount">Loan Amount  (in Thousands of dollars):</label>
        <input type="text" id="LoanAmount" name="LoanAmount" required><br>
        <!-- Problem -->
        <label for="Loan_Amount_Term">Loan Term (number of months):</label>
        <input type="text" id="Loan_Amount_Term" name="Loan_Amount_Term" required><br>
        
        <label for="Credit_History">Credit History:</label>
        <input type="checkbox" id="Credit_History" name="Credit_History" value="0">
        <label for="Credit_History">Not Provided</label>
        <input type="checkbox" id="Credit_History" name="Credit_History" value="1">
        <label for="Credit_History">Provided</label><br>

        <label for="Property_Area">Property Area:</label>
        <input type="checkbox" id="Property_Area" name="Property_Area" value="Rural">
        <label for="Property_Area">Rural</label>
        <input type="checkbox" id="Property_Area" name="Property_Area" value="Semiurban">
        <label for="Property_Area">Semiurban</label>
        <input type="checkbox" id="Property_Area" name="Property_Area" value="Urban">
        <label for="Property_Area">Urban</label><br>
        <br>
        <br>

        <input type="submit" value="Submit">
    </form>

    <!-- PRediction Resutls -->
    <div id="prediction_result">
        {% if prediction %}
            <p>Prediction: {{ data.prediction }}</p>
        {% endif %}
    </div>

    <!-- Java Script, we need to separate the files, one htlml  -->
    <script>
        // Function to handle form submission
        function submitForm() {
            const form = document.getElementById('loanForm');
            const formData = new FormData(form);  // Use FormData to send multipart/form-data
            console.log("Form data:", formData); // Add this line
            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Update the prediction result on the page
                const predictionResult = document.getElementById('prediction_result');
                predictionResult.innerHTML = `<p>Prediction: ${data.prediction}</p>`;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
        // Attach form submission handler
        document.getElementById('loanForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent form from submitting normally
            console.log("Form submitted!"); // Add this line
            submitForm();
        });
    </script>
   
</body>
</html>

